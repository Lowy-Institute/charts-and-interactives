- toPercent = (n) => (n * 100).toFixed(2) + "%"

block page
  #infographic-un-leadership.wrapper.flex.flex-col
    svg.close(version='1.2' baseprofile='tiny' xmlns='http://www.w3.org/2000/svg' width='34' height='34' viewbox='0 0 24 24')
      path(stroke="white" stroke-width="2" d='M17.414 6.586c-.78-.781-2.048-.781-2.828 0l-2.586 2.586-2.586-2.586c-.78-.781-2.048-.781-2.828 0-.781.781-.781 2.047 0 2.828l2.585 2.586-2.585 2.586c-.781.781-.781 2.047 0 2.828.39.391.902.586 1.414.586s1.024-.195 1.414-.586l2.586-2.586 2.586 2.586c.39.391.902.586 1.414.586s1.024-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-2.585-2.586 2.585-2.586c.781-.781.781-2.047 0-2.828z')
    
    .txt-center.flex.flex-grow.flex-col
      strong.chart-title.txt-lg.txt-semi China's UN Leadership
      
      .stats.flex.txt-center
        .col-1-2.ph-md
          .xl.txt-cond 2
            sup nd
          .sm largest financial contributor<br>after the United States^
        .col-1-2.ph-md
          .xl.txt-cond 4
          .sm UN specialised agencies<br>led by a Chinese national
          
      hr
  
      .china.flex.flex-ch
        .col-1-3
          svg(xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewbox='0 0 30 20')
            defs
              path#s(d='M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z' fill='#ffde00')
            rect(width='30' height='20' fill='#de2910')
            use(xlink:href='#s' transform='translate(5,5) scale(3)')
            use(xlink:href='#s' transform='translate(10,2) rotate(23.036243)')
            use(xlink:href='#s' transform='translate(12,4) rotate(45.869898)')
            use(xlink:href='#s' transform='translate(12,7) rotate(69.945396)')
            use(xlink:href='#s' transform='translate(10,9) rotate(20.659808)')
        .col-2-3.sm.txt-red.txt-left.ph-sm
          ul.list-bare.fw-4
            li <span>✦</span>&ensp;Food and Agriculture Organization
            li <span>✦</span>&ensp;International Civil Aviation Organization
            li <span>✦</span>&ensp;International Telecommunications Union
            li <span>✦</span>&ensp;UN Industrial Development Organization
      
      hr
      
      .small-flags.flex.txt-mute.xs.txt-left.ph-sm
        .col-1-3.flex-col
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewbox='0 0 300 200')
                title Georgia
                defs
                  g#smallcross
                    clippath#vclip
                      path(d='M-109,104 a104,104 0 0,0 0,-208 H109 a104,104 0 0,0 0,208 z')
                    path#varm(d='M-55,74 a55,55 0 0,1 110,0 V-74 a55,55 0 0,1 -110,0 z' clip-path='url(#vclip)')
                    use(xlink:href='#varm' transform='rotate(90)')
                rect(width='300' height='200' style='fill:#fff')
                path(d='m 130,0 0,80 -130,0 L 0,120 l 130,0 0,80 40,0 0,-80 130,0 0,-40 -130,0 L 170,0 130,0 z' style='fill:#ff0000')
                use(xlink:href='#smallcross' transform='translate(64.45,39.45)' fill='#f00')
                use(xlink:href='#smallcross' transform='translate(235.55,160.55)' fill='#f00')
                use(xlink:href='#smallcross' transform='translate(235.55,39.45)' fill='#f00')
                use(xlink:href='#smallcross' transform='translate(64.45,160.55)' fill='#f00')
            .col-3-4.ph-xs World Tourism Organization
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' viewbox='0 0 60 30')
                title United Kingdom
                clippath#t
                  path(d='M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z')
                path(d='M0,0 v30 h60 v-30 z' fill='#00247d')
                path(d='M0,0 L60,30 M60,0 L0,30' stroke='#fff' stroke-width='6')
                path(d='M0,0 L60,30 M60,0 L0,30' clip-path='url(#t)' stroke='#cf142b' stroke-width='4')
                path(d='M30,0 v30 M0,15 h60' stroke='#fff' stroke-width='10')
                path(d='M30,0 v30 M0,15 h60' stroke='#cf142b' stroke-width='6')
            .col-3-4.ph-xs International Labour Organization
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewbox='0 0 10080 5040')
                title Australia
                defs
                  clippath#c
                    path(d='M0,0V1.5H7V3H6zM6,0H3V3.5H0V3z')
                  path#Star7(d='M0,-360 69.421398,-144.155019 281.459334,-224.456329 155.988466,-35.603349 350.974048,80.107536 125.093037,99.758368 156.198146,324.348792 0,160 -156.198146,324.348792 -125.093037,99.758368 -350.974048,80.107536 -155.988466,-35.603349 -281.459334,-224.456329 -69.421398,-144.155019z')
                  path#Star5(d='M0,-210 54.859957,-75.508253 199.721868,-64.893569 88.765275,28.841586 123.434903,169.893569 0,93.333333 -123.434903,169.893569 -88.765275,28.841586 -199.721868,-64.893569 -54.859957,-75.508253z')
                  use#Cstar(xlink:href='#Star7' transform='scale(2.1)')
                g(transform='scale(840)')
                  rect(width='12' height='6' fill='#00008b')
                  path(d='M0,0 6,3M6,0 0,3' stroke='#fff' stroke-width='0.6')
                  path(d='M0,0 6,3M6,0 0,3' stroke='#f00' stroke-width='0.4' clip-path='url(#c)')
                  path(d='M3,0V3.5M0,1.5H7' stroke='#fff')
                  path(d='M3,0V3.5M0,1.5H7' stroke='#f00' stroke-width='0.6')
                  path(d='M0,3H6V0H8V4H0z' fill='#00008b')
                g(fill='#fff')
                  use#Comwlth(xlink:href='#Cstar' x='2520' y='3780')
                  use(id='αCrucis' xlink:href='#Star7' x='7560' y='4200')
                  use(id='βCrucis' xlink:href='#Star7' x='6300' y='2205')
                  use(id='γCrucis' xlink:href='#Star7' x='7560' y='840')
                  use(id='δCrucis' xlink:href='#Star7' x='8680' y='1869')
                  use(id='εCrucis' xlink:href='#Star5' x='8064' y='2730')
            .col-3-4.ph-xs World IP Organization            
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' viewbox='0 0 5 3')
                title Bulgaria
                rect(width='5' height='3' fill='#fff')
                rect(width='5' height='2' y='1' fill='#00966E')
                rect(width='5' height='1' y='2' fill='#D62612')
            .col-3-4.ph-xs International Monetary Fund
            
        .col-1-3.flex-col
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewbox='-120 -80 240 160')
                title Kenya
                defs
                  path#spearshape(d='M -1,55.4256258422040733928782829281879157421699 h 2 V -38 C 3,-40 3,-43 3,-46 C 3,-48 3,-56 0,-64.6632301492380856250246634162192350325315 C -3,-56 -3,-48 -3,-46 C -3,-43 -3,-40 -1,-38 z' stroke-miterlimit='10' transform='rotate(30)')
                rect(x='-120' y='-80' width='240' height='160' fill='#fff')
                rect(x='-120' y='-80' width='240' height='48')
                rect(x='-120' y='32' width='240' height='48' fill='#060')
                g#spear
                  use(xlink:href='#spearshape' stroke='#000')
                  use(xlink:href='#spearshape' fill='#fff')
                use(xlink:href='#spear' transform='scale(-1,1)')
                path(fill='#b00' d='M -120,-24 V 24 H -19 c 3,8 13,24 19,24 s 16,-16 19,-24 H 120 V -24 H 19 c -3,-8 -13,-24 -19,-24 s -16,16 -19,24 z')
                path#deco_r(d='M 19,24 c 3,-8 5,-16 5,-24 s -2,-16 -5,-24 c -3,8 -5,16 -5,24 s 2,16 5,24')
                use(xlink:href='#deco_r' transform='scale(-1,1)')
                g(fill='#fff')
                  ellipse(rx='4' ry='6')
                  path#deco_br(d='M 1,5.85 c 0,0 4,8 4,21 s -4,21 -4,21 z')
                  use(xlink:href='#deco_br' transform='scale(-1)')
                  use(xlink:href='#deco_br' transform='scale(-1,1)')
                  use(xlink:href='#deco_br' transform='scale(1,-1)')
            .col-3-4.ph-xs Universal Postal Union
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewbox='0 0 7410 3900')
                title United States
                rect(width='7410' height='3900' fill='#b22234')
                path(d='M0,450H7410m0,600H0m0,600H7410m0,600H0m0,600H7410m0,600H0' stroke='#fff' stroke-width='300')
                rect(width='2964' height='2100' fill='#3c3b6e')
                g(fill='#fff')
                  g#usa18
                    g#usa9
                      g#usa5
                        g#usa4
                          path#usa(d='M247,90 317.534230,307.082039 132.873218,172.917961H361.126782L176.465770,307.082039z')
                          use(xlink:href='#usa' y='420')
                          use(xlink:href='#usa' y='840')
                          use(xlink:href='#usa' y='1260')
                        use(xlink:href='#usa' y='1680')
                      use(xlink:href='#usa4' x='247' y='210')
                    use(xlink:href='#usa9' x='494')
                  use(xlink:href='#usa18' x='988')
                  use(xlink:href='#usa9' x='1976')
                  use(xlink:href='#usa5' x='2470')
            .col-3-4.ph-xs World Bank
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewbox='0 0 720 360')
                title Ethiopia
                rect(fill='#da121a' height='360' width='720')
                rect(fill='#fcdd09' height='240' width='720')
                rect(fill='#078930' height='120' width='720')
                g(transform='translate(360,180)')
                  circle(fill='#0f47af' r='120')
                  g#ett
                    path(fill='#fcdd09' d='M0,-96 -4.205849,-83.055728 13.141645,-29.665631H-9.987258L-12.586616,-21.665631H61.576052L72.587108,-29.665631H21.553343z')
                    path(stroke='#fcdd09' stroke-width='4' d='M0,44V96' transform='rotate(216)')
                  use(xlink:href='#ett' transform='rotate(72)')
                  use(xlink:href='#ett' transform='rotate(144)')
                  use(xlink:href='#ett' transform='rotate(216)')
                  use(xlink:href='#ett' transform='rotate(288)')
            .col-3-4.ph-xs World Health Organization
          .row.flex-ch
            .col-1-4
              svg(xmlns='http://www.w3.org/2000/svg' viewbox='0 0 1800 1100')
                title Finland
                rect(width='1800' height='1100' fill='#fff')
                rect(width='1800' height='300' y='400' fill='#003580')
                rect(width='300' height='1100' x='500' fill='#003580')
            .col-3-4.ph-xs World Meteorological Organization    
            
        .col-1-3.flex-col
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewbox='-36 -24 72 48')
                title South Korea
                rect(fill='#fff' x='-36' y='-24' width='72' height='48')
                g(transform='rotate(-56.3099325)')
                  g#b2
                    path#b(d='M-6-25H6M-6-22H6M-6-19H6' stroke='#000' stroke-width='2')
                    use(xlink:href='#b' y='44')
                  path(stroke='#fff' stroke-width='1' d='M0,17v10')
                  circle(fill='#c60c30' r='12')
                  path(fill='#003478' d='M0-12A6,6 0 0 0 0,0A6,6 0 0 1 0,12A12,12 0 0,1 0-12Z')
                g(transform='rotate(-123.6900675)')
                  use(xlink:href='#b2')
                  path(stroke='#fff' stroke-width='1' d='M0-23.5v3M0,17v3.5M0,23.5v3')
            .col-3-4.ph-xs International Maritime Organization
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewbox='0 0 809 500')
                title Togo
                rect(width='809' height='500' fill='#006a4e')
                rect(y='100' width='809' height='100' fill='#ffce00')
                rect(y='300' width='809' height='100' fill='#ffce00')
                rect(width='300' height='300' fill='#d21034')
                g(transform='translate(150,150)' fill='#fff')
                  g#togoc
                    path#togot(d='M 0,-95 V 0 H 50' transform='rotate(18 0,-95)')
                    use(xlink:href='#togot' transform='scale(-1,1)')
                  use(xlink:href='#togoc' transform='rotate(72)')
                  use(xlink:href='#togoc' transform='rotate(144)')
                  use(xlink:href='#togoc' transform='rotate(216)')
                  use(xlink:href='#togoc' transform='rotate(288)')
            .col-3-4.ph-xs International Fund for Agricultural Development
          .row.flex-ch
            .col-1-4 
              svg(xmlns='http://www.w3.org/2000/svg' viewbox='0 0 3 2')
                title France
                rect(width='3' height='2' fill='#ED2939')
                rect(width='2' height='2' fill='#fff')
                rect(width='1' height='2' fill='#002395')
            .col-3-4.ph-xs UN Educational Scientific and Cultural Organization
          

    .info-src(style="padding-top: 5px") ^ Source: 
      a(target="_blank" href="https://undocs.org/en/ST/ADM/SER.B/992") UN Secretariat

block append css
  style
    :sass
    
      #infographic-un-leadership
        position: relative
        height: 550px
        max-width: 600px
        color: black
        box-shadow: 0 0 20px 5px #aaa
        background: white
        padding: 40px
        
        .sm
          font-size: 16px
          
        hr
          margin: 20px 0
        
        .small-flags
          &.xs
            font-size: 11px
            line-height: 1.2
          svg
            border: 0.5px solid #555
          .row:nth-child(2),
          .row:nth-child(3)
            margin-top: 0.75em
            margin-bottom: 0.75em

        .chart-title
          margin-bottom: 1em
          padding: 0 24px

        li
          line-height: 20px 
          span
            display: inline-block
            transform: scale(0.7)
        
        svg
          overflow: visible

        .close
          position: absolute
          top: 0
          right: 0
          fill: #B90000
          cursor: pointer
          transition: 300ms
          
          &:hover
            fill: lighten(#b90000,20)

        @media (max-width: 630px)
            
          padding: 30px
          overflow: scroll
          
          .col-1-2,
          .col-2-3
            width: 100%
            flex-basis: 100%
            
          .flex
            &.stats,
            &.china,
            &.small-flags
              align-items: center
              flex-direction: column
          .stats
            .col-1-2:first-child
              margin-bottom: 14px
              
          .china .txt-left
            margin-top: 14px
            text-align: center
          
          .small-flags 
            &.xs
              font-size: 14px
            .row:not(:first-child)
              margin-top: 0.75em
              margin-bottom: 0.75em
            .col-1-3
              width: 100%
              flex-basis: 100%
            .col-1-4
              width: 20%
              flex-basis: 20%
