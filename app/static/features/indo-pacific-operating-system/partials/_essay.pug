extend /partials/layout

block append config
  - page.class = "essay"
  - page.data = data.getOne("static/features/indo-pacific-operating-system/data").essays
  - essay = page.data.find(e => e.author === author)
  - index = page.data.findIndex(e => e.author === author)

block prepend head
  - page.url = "https://interactives.lowyinstitute.org/features/indo-pacific-operating-system/"
  - page.url += "essays/" + essay.href
  - page.image = `${page.url}.jpg`
  - page.metaTitle = `${essay.title} - The Indo-Pacific Operating System – Lowy Insitute`
  - page.description = ""
  

block page
  
  include _logo
  include _pagemenu
  include _social
  
  #splash.h-screen.flex-cv(
    style=`background-image: url('../../img/essays/${essay.href}.jpg')`
    )
      .landing-block.flex.items-center.txt-ff.container
        .col.mx-4
          -
            long = essay.title.split(/\s/g)
              .filter(s => s.length > 10).length
          h1.txt-xxl.lead-tightest(class=long ? "long" : "")= essay.title
          h3= essay.author
    
  .profile-block.bg-dk.txt-ff
    .container.flex.flex-swap.items-center
      img.profile-image(src=`../../img/authors/${slugify(essay.author)}.jpg` width="200" height="180")
      .flex-col
        .txt-mini.fw700.txt-lt About the author
        p.profile-text!= essay.bio

  +pagemenu(["Essay", "Challenge", "Menu"], true)
  
    
  article.relative.above

    #essay.mb-16
    
    section
      h1 Essay
      block body
        
    hr#challenge.my-20(style="border-bottom: 3px solid #002b45")
      
    h1 Challenge the expert
    p.opacity-50.fw-400.mb-8
      | Ben Scott, Director of the Lowy Institute’s Rules-Based Order Project, challenges 
      span= essay.author
      | ’s key arguments.
    hr
      
    section
      block qanda
    
    hr.my-20#menu(style="border-bottom: 3px solid #002b45")
    section
      h1 Menu
      p Five essays from experts from, or based in, Southeast Asia provide a sense of the region’s complexity and the nuance with which any effort to shore up – or rebuild – regional order must grapple. 
      include _link-grid

  include _footer

block append css
  style
    include:sass ../styles/_app.sass
    include:sass ../styles/_link-grid.sass
    include:sass ../styles/_page-menu.sass
    include:sass ../styles/_article.sass
    
block append scripts
  script
    include:coffee ../coffee/utils.coffee
    include:coffee ../coffee/base.coffee
