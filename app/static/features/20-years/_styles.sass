// Vars
$color-hl: #ffc52c
$color-dk: transparent
$color-lt: #e4deda
$color-ff: #fff
$color-0: #000
$muted: #969ba4
$blue-dark: #001525
$blue-lowy: #002b45
$blue-light: #004b78
$interpreter-dk: #1a1f23
$interpreter-lt: #f80
$highlight: lighten($blue-light, 10)
$easing-cubic-in-out: cubic-bezier(0.65, 0.05, 0.36, 1)
$easing-exp-in-out: cubic-bezier(0.68, -0.01, 0.23, 1.34)

// Colors
.bg-hl
  background: $color-hl
.bg-dk
  background: $color-dk
.bg-b-dk
  background: $blue-dark
.bg-b-bl
  background: $blue-lowy
.bg-b-lt
  background: $blue-light
.bg-lt
  background: $color-lt
.bg-ff
  background: $color-ff
.bg-interpreter-dk
  background: $interpreter-dk
.bg-interpreter-lt
  background: $interpreter-lt

body,
body.embed-false
  background: linear-gradient(-135deg, $blue-light, $blue-dark)
  color: $color-ff

.text-box
  padding: 2rem
  position: relative
  transition: all 0.8s
  pointer-events: none

  > *
    opacity: 0
    z-index: 1
    position: relative
    transform: translate3d(0, 8px, 0)
    transition: opacity 0.8s, transform 0.8s

  &::before
    content: ''
    position: absolute
    top: 0
    left: 0
    right: 0
    bottom: 0
    z-index: 0
    border-left: 1px solid
    background: $blue-lowy
    transition: all 0.8s $easing-cubic-in-out
    transform: scaleX(0)
    transform-origin: left

  .active &

    > *
      transition: opacity 0.6s 0.4s, transform 0.6s 0.4s
      opacity: 1
      transform: translate3d(0, 0, 0)

    &::before
      transform: scaleX(1)

#background-gallery,
.background-slider,
.background-video,
.background-image
  position: absolute
  top: 0
  left: 0
  right: 0
  bottom: 0
  z-index: 0

.background-image,
.background-slider
  opacity: 0
  transition: opacity 1s, background-position 2s
  pointer-events: none
  background-position: 48% 50%
  background-size: 110% auto
  background-repeat: no-repeat

.background-image
  @media (max-aspect-ratio: 16/10)
    background-size: auto 110%

.background-slider
  transition: opacity 1s, background-position 0.2s ease-out
  background-size: auto 100%
  background-position: 0 50%

@for $i from 0 through 15
  .page-#{$i} .background-image-#{$i}
    opacity: 0.33
    background-position: 52% 50%
  .page-#{$i} .background-slider-#{$i}
    opacity: 0.5

.page-0 .background-image-0
  opacity: 0.5

.background-video
  opacity: 0
  transition: opacity 1s

.page-8 .background-video-8
  opacity: 0.4

.background-video video
  object-fit: cover
  width: 100%
  height: 100%
  position: absolute
  left: 0
  top: 0

.txt-hl
  color: lighten($color-hl, 2)
.txt-dk
  color: $blue-lowy
.txt-lt
  color: $color-lt
.txt-ff
  color: $color-ff
.txt-interpreter-dk
  color: $interpreter-dk
.txt-interpreter-lt
  color: $interpreter-lt

// Grid
.row
  display: flex
  flex-direction: row
  width: 100%
  height: 100%

.col-fw,
.col-1-2,
.col-1-3,
.col-1-4,
.col-2-5,
.col-3-4,
.col-3-5,
.col-2-3
  display: flex
  justify-content: center
  align-items: center
  flex-shrink: 0
  flex-grow: 0
  overflow: hidden
  position: relative

.title
  position: absolute
  top: 8%
  left: 20px
  right: 20px
  text-align: center
  text-transform: uppercase
  font-size: 16px
  font-weight: 300

.caption
  position: absolute
  bottom: 4%
  right: 16px
  text-align: right
  text-transform: uppercase
  font-size: 12px
  
  & span
    background: rgba(0,21,37,.6)
    padding: .125em .25em

.col-fw
  width: 100%
  flex-basis: 100%
.col-1-2
  width: 50%
  flex-basis: 50%
.col-1-3
  width: 33.33%
  flex-basis: 33.33%
.col-2-3
  width: 66.67%
  flex-basis: 66.67%
.col-1-4
  width: 25%
  flex-basis: 25%
.col-3-4
  width: 75%
  flex-basis: 75%
.col-2-5
  width: 40%
  flex-basis: 40%
.col-3-5
  width: 60%
  flex-basis: 60%

.bg-img
  width: 100%
  height: 100%
  object-fit: cover

.column
  flex: 1
  overflow: hidden
.row-test
  display: flex
  
.sub-column
  flex: 1
  width: 50%

.mw
  max-width: 74%

.sticky-top
  position: sticky
  top: 0

.opacity-0
  opacity: 0

@keyframes fadeAnimation
  0%
    opacity: 0
    transform: scale3d(0.9, 0.9, 0.9)
    transform-origin: center
  100%
    opacity: 1
    transform: scale3d(1, 1, 1)

.fade
  animation: fadeAnimation 1.6s $easing-cubic-in-out

@keyframes rise-in
  0%
    opacity: 0
    transform: translateY(100%)
  100%
    opacity: 1
    transform: translateY(0)

.title-animation
  opacity: 0
  animation: rise-in 1.0s 0.8s $easing-cubic-in-out forwards

.rise-in
  opacity: 0
  transform: translateY(0.75em)

  .active &
    transition-duration: 800ms
    transition-property: all
    transform: translateY(0%)
    opacity: 1

.img-pan
  width: 100%
  height: 100%
  overflow: hidden

  &:before
    content: ''
    position: absolute
    top: 0
    left: 0
    right: 0
    bottom: 0
    z-index: 1
    background: $blue-lowy
    mix-blend-mode: screen
    opacity: 0.5

  .bg-img
    width: 120%
    max-width: none
    mix-blend-mode: luminosity
    filter: saturate(0)

    &.desaturate
      mix-blend-mode: normal

    .active &
      transition: transform 12s
      transform: translate3d(-8%, 0, 0)

.video
  aspect-ratio: 16 / 9
  width: 100%
  box-shadow: 0 0 40px rgba(0,0,0,.2)

.frame
  position: relative
  z-index: 1

.txt-cond
  font-family: Cond
.txt-3xl
  font-size: 120px
.txt-xxl
  font-size: 80px
  line-height: 0.875
  font-weight: 300
  letter-spacing: 0.04em
.txt-xl
  font-size: 64px
  line-height: 1
  font-weight: 300
  margin: -4px 0 4px
.txt-title
  font-size: 48px
  line-height: 1
  letter-spacing: -0.02em
  font-weight: 300
.txt-lg
  font-size: 36px
  line-height: inherit
  margin: -4px 0 4px
.txt-md
  font-size: 28px
  line-height: inherit
.txt-sm
  font-size: 14px
  line-height: inherit
  font-family: Sans, sans-serif
.txt-xs
  font-size: 12px
  font-family: Sans, sans-serif

a
  transition: text-decoration-color 300ms, filter 300ms
  text-decoration-color: transparent
  font-weight: 500
  color: $color-ff

  &:hover,
  &:focus
    color: $color-ff
    text-decoration-color: $color-ff

  &.hover-lighten
    &:hover,
    &:focus
      color: $color-ff
      filter: brightness(1.1)
      text-decoration-color: transparent

blockquote
  font-style: normal
  border: none
  color: $color-ff
  margin: 0
  padding: 0.5em
  line-height: 1.3
  font-size: 2.25rem
  text-align: center

  & p
    line-height: 1.2
    margin-bottom: 1rem
    text-align: left
    padding: 0 3rem 0 0

  & cite
    font-style: normal
    text-transform: uppercase
    text-align: left
    display: block

  &.right
    border-left: 0
    border-right: 2px solid $color-hl

    & p
      text-align: right
      padding: 0 0 0 3rem
      pa

    & cite
      text-align: right

svg, img
  margin: auto
  max-height: 100%

#bligh-st
  height: 80%
  max-height: 400px
  width: auto
  margin: auto

  path
    transition: fill 0.4s ease-in
    fill: $color-lt
    stroke: $blue-lowy
    stroke-width: 0.5px

    .active &
      fill: $color-ff

.box .layer:nth-child(5),
.box .layer:nth-child(4),
.box .layer:nth-child(3),
.box .layer:nth-child(2),
.box .layer:nth-child(1)
  animation: none

.box
  position: relative
  width: 440px
  height: 255px
  margin-top: 200px
  background: rgba(0, 0, 0,.1)
  transform: rotate(-30deg) skew(25deg) scale(0.8)

  .layer
    background-repeat: no-repeat
    background-size: contain
    position: absolute
    top: 0
    left: 0
    display: block
    width: 100%
    height: 100%
    transition: 1s

    &:nth-child(1)
      background-image: url('./img/pam.png')
    &:nth-child(2)
      background-image: url('./img/gdi.png')
    &:nth-child(3)
      background-image: url('./img/sea-aid-map.png')
    &:nth-child(4)
      background-image: url('./img/poll.png')
    &:nth-child(5)
      background-image: url('./img/api.png')

@for $i from 1 through 5
  .active .box .layer:nth-child(#{$i})
    animation: layer-animation-#{$i} 1.6s $easing-exp-in-out forwards

  @keyframes layer-animation-#{$i}
    0%
      transform: translate(0, 0)
      opacity: 0.1
    100%
      transform: translate($i * 10.5%, $i * -18%)
      opacity: 0.2 + 0.2 * $i

body
  font-family: Cond, sans-serif
  text-align: center
  overflow: hidden
  font-size: 22px
  font-weight: 400
  text-rendering: geometricPrecision
  display: flex
  flex-direction: column

strong, .txt-tu, .caption
  font-family: Cond, sans-serif
  font-weight: 600
  font-style: normal

[data-view="counter"]
  font-family: Sans, sans-serif

.row,
.container,
.scroller
  max-width: 1280px
  width: 100%
  padding: 0 2rem
  margin: auto
  box-sizing: border-box

#header-bg
  position: absolute
  top: 12px
  height: 52px
  left: 12px
  right: 12px

#header
  line-height: 64px
  height: 73px
  margin: auto
  transition: all 300ms

  .page-0 &
    opacity: 0

  .header-title
    margin: auto

  .header-logo,
    width: 192px
    line-height: 12px
    padding: 16px 0

  .header-page
    width: 80px
    line-height: 12px
    padding: 20px 0
    margin-left: 112px

  .header-page
    float: right
    text-align: right

    .pager-index
      width: 48px

    .pager-total
      position: relative
      &:before
        content: ""
        position: absolute
        left: 40px
        bottom: 2px
        width: 44px
        border-top: 1px solid
        transform: rotate(-32deg)
        transform-origin: left center

  .header-logo
    float: left
    text-align: left

  .social-share
    display: none

.fade-in
  opacity: 0
  transition: none

  .active &
    transition-duration: 800ms
    transition-property: all
    opacity: 1


@for $i from 0 through 30
  .delay-#{$i}
    transition-delay: ($i * 200ms)

#footer
  line-height: 64px
  height: 64px

  .scroll-prompt
    transition: opacity 300ms
    opacity: 0
    line-height: inherit
    font-weight: 600
    animation: prompt 3s infinite linear alternate

    .page-0 &
      opacity: .9

.social-share
  display: flex
  height: 100%

  .icon
    width: 40px
    height: 40px
    line-height: 40px
    border-radius: 20px
    display: inline-block
    /* border: 1px solid mix($color-ff, $blue-light)
    color: $color-ff
    background-color: $color-dk
    margin: auto
    box-sizing: border-box
    -webkit-transition:  border 300ms ease
    transition: color border 300ms ease,border 300ms ease
    border: 1px solid transparent

    @media (color-gamut: p3)
      background-color: $blue-light

    + .icon
      margin-left: 8px

    &:hover
      border: 1px solid $color-ff

    &:active
      border: 1px solid $color-hl

#header,
#footer
  position: relative
  &:before
    content: ""
    position: absolute
    left: 0
    right: 0
    z-index: 10
    /* border-top: 1px solid mix($color-lt, $color-ff)
    mix-blend-mode: darken

#header:before
  top: 100%

.block
  max-width: 700px
  text-align: left

.logo-block
    margin: auto auto
    vertical-align: middle
    width: 40vw

#footer:before
  bottom: 100%

.pager
  margin: auto
  width: -moz-fit-content
  width: fit-content
  position: absolute
  transform: rotate(90deg) scale3d(1.3, 1.3, 1.3)
  right: -10vw
  bottom: 50vh

  .pager-page
    position: absolute
    left: 8px
    top: 50%
    width: 8px
    margin: -4px
    z-index: 1
    transition: opacity 300ms

    .page-0 &
      opacity: 0

    .pager-page-start,
    .pager-page-middle,
    .pager-page-end
      height: 8px
      background: $color-hl
      position: absolute
      left: 0
      transform-origin: left center

    .pager-page-start
      width: 50%
      border-radius: 4px 0 0 4px

    .pager-page-middle
      width: 200%
      left: 4px
      transform: scale(0.1, 1)

    .pager-page-end
      width: 50%
      left: auto
      right: 0
      border-radius: 0 4px 4px 0

  .pager-list
    list-style: none
    font-size: 16px
    background: transparent
    text-align: center
    padding: 0
    overflow: hidden

  .pager-item
    margin: 0
    float: left

  .pager-link
    display: block
    text-decoration: none
    text-align: center
    width: 16px
    height: 60px
    position: relative

    &:before
      content: ""
      position: absolute
      left: 50%
      top: 50%
      width: 8px
      height: 8px
      margin: -4px
      border-radius: 4px
      transition: background 300ms
      /* background: darken($color-lt, 8)
      background: $color-dk
      box-shadow: inset 0px 0px 0px 1px $color-ff

      /* @media (color-gamut: p3)
      /*  background: $color-lt

    &:hover:before,
    &:focus:before
      background: $color-ff

/* scrollbar colours */

html
  scrollbar-color: #002b45 #004b78

#scroller::-webkit-scrollbar
  background: #004b78
  width: 0
#scroller::-webkit-scrollbar-thumb
  background: #002b45

/* scrollbar colours end */

#scroller
  margin: auto
  height: 100%
  width: 100%
  overflow: auto
  scroll-behavior: smooth
  scroll-snap-type: y mandatory

  &.scrolling
    scroll-behavior: initial

.scroll-item
  width: 100%
  height: 100%
  scroll-snap-align: start
  position: relative
  transition: opacity 1s

  .scrolling &
    scroll-snap-align: none

#scroll-item-outro
  li
    line-height: 1.25
  li a
    text-decoration: none
    border-bottom: 1px solid $color-lt
    display: inline-block
    line-height: 1

  hr
    border-color: darken($color-lt, 4)

  .social-share .icon
    width: auto
    padding: 0 0.75em
    background-color: $color-dk
    color: $color-ff
    border: 1px solid $color-ff

    &:hover
      background-color: $color-dk
      color: $color-hl
      border: 1px solid $color-hl

    strong
      vertical-align: top

    &:before
      margin-right: 0.5em

.digit
  overflow: hidden
  display: inline-block
  position: relative
  width: 0.6em
  height: 1em
  line-height: 1
  vertical-align: bottom

  ul
    list-style: none
    padding: 0
    position: absolute
    left: 0
    top: 0
    height: 10em

  li
    margin: 0
    line-height: inherit
    user-select: none
    text-align: right

    &.active
      user-select: auto

#map
  backface-visibility: hidden

#map-surrounds,
#map-australia
  transform: scale3d(0.9, 0.9, 0.9)
  transform-origin: center
  path
    opacity: 0
    fill: $color-ff

#map-surrounds:before
  background: linear-gradient(to bottom, #0c213a, rgba(12, 33, 58, 0))

#map-australia path
  fill: $color-hl

.active
  #map-surrounds,
  #map-australia
    transition: transform 5000ms
    transform: scale3d(1, 1, 1)

    path
      transition: all 2000ms
      opacity: 1

.fl-tn
  width: 180px !important
  height: auto
  position: absolute
  bottom: 8vw
  right: 16vh

#controls
  display: none

.faint
  opacity: 0.7

.suffix
  position: absolute
  left: 100%

#animated-map
  width: 100%
  height: 100%
  position: absolute
  border-radius: 100%
  box-sizing: border-box
  pointer-events: none !important
  filter: blur(6px)
  // mix-blend-mode: luminosity
  transition: filter 0.4s 0.6s, opacity 1s
  padding: 2rem
  opacity: 0

  .active &
    filter: blur(0px)
    opacity: 0.5

  > *
    pointer-events: none !important

  &-gradient
    display: none
    position: absolute
    top: 0
    left: 0
    right: 0
    bottom: 0
    z-index: 1
    mask-repeat: space
    background: linear-gradient(90deg, #0000, #000)

#scroll-item-10
  font-size: 18px

.ws-no
  white-space: nowrap

.svg-canvas
  position: absolute
  top: 0
  left: 0
  opacity: 0
  width: 100%
  height: 100%
  transition: opacity 1s 0.6s
  transform: rotate3d(1.0, -0.75, 1.5, 90deg) scale(0.66)
  aspect-ratio: 1

  .active &
    opacity: 1

@media (max-width: 960px), (max-height: 800px)
  .txt-xxl
    font-size: 72px
  .txt-xl,
  .txt-title
    font-size: 64px
  .txt-lg
    font-size: 32px
  .txt-md
    font-size: 24px
  body
    font-size: 20px

@media (max-width: 980px)
  body
    font-size: 16px

  .hidden-sm,
  .header-title,
  .header-page,
  .scroll-prompt,
  #footer .social-share,
  #intro-logo,
  #col-seats-and-parties
    display: none

  .sm-hidden
    display: none

  .row
    display: flex
    flex-direction: column
    justify-content: center
    overflow: hidden

  .col-1-3,
  .col-2-3,
  .col-1-2
    width: 100%
    flex-basis: auto

  .block
    padding: 0

  #scroll-item-4,
  #scroll-item-10
    font-size: 16px

  #scroll-item-4,
  #scroll-item-6
    .row
      gap: 1rem
      grid-gap: 1rem

  #scroll-item-10
    .row
      gap: 2rem
      grid-gap: 2rem

    .animated-numbers-grid .block
      padding: 1.5rem 1rem

    .block
      text-align: center

      &:nth-child(3),
      &:nth-child(4)
        border-top: 1px solid #ffc52c

    .spin-graphic-wrapper
      display: none

  #scroll-item-6
    .row:first-child
      border-bottom: 1px solid #f80
    .animated-number-cell
      border: none!important

  #scroll-item-12
    .col-1-2
      flex: 1
      height: 50%
      flex-basis: 50%

  .animated-numbers-grid
    width: 100%
    margin-right: 0

  .box
    width: 10.5rem
    height: 6rem
    margin-top: 6rem

  .background-slider
    transition: opacity 1s

  .background-image
    transition: opacity 1s, background-position 8s linear
    background-position: 50% 50%

  .background-image-0
    background-position: 70% 50%!important
  .background-image-1
    background-position: 90% 50%
  .background-image-2
    background-position: 60% 50%
  .background-image-3
    background-position: 30% 50%
  .background-image-7
    background-position: 45% 50%

  .page-0 .background-image-0
    background-position: 80% 50%!important
  .page-1 .background-image-1
    background-position: 80% 50%
  .page-2 .background-image-2
    background-position: 70% 50%
  .page-3 .background-image-3
    background-position: 20% 50%
  .page-7 .background-image-7
    background-position: 35% 50%
  .page-11 .background-image-11
    background-position: 60% 50%
  .page-11 .background-image-12
    background-position: 40% 50%

  #header .social-share
    display: flex

  .pager
    margin: auto
    width: -moz-fit-content
    width: fit-content
    position: absolute
    transform: none
    left: 0
    right: 0
    bottom: 0

  #img-interpreter
    width: 180px
    margin-top: -24px
    object-fit: contain

  br
    display: inline
    padding-left: 0.4em

  hr
    margin: 0.4em 0

  .txt-xxl
    font-size: 64px
  .txt-xl,
  .txt-title
    font-size: 42px
  .txt-lg
    font-size: 24px
  .txt-md
    font-size: 20px
  body
    font-size: 17px
  blockquote
    font-size: 1.5rem

  a
    text-decoration-thickness: 1px
    text-underline-offset: 3px

  #scroller .txt-sm
    font-size: 11px

  .caption
    font-size: 10px
    bottom: 14px

  #header
    line-height: 72px
    height: 72px
    display: flex
    align-items: center
    justify-content: space-between

    .header-logo
      padding: 16px 0
      width: 142px

  .logo-block
    width: 72vw

  #footer
    line-height: 40px
    height: 40px

  .pager .pager-link
    height: 40px

  dd
    font-size: 21px
    margin-bottom: 12px

  .txt-title,
  .intro-description
    max-width: 240px
    margin: auto

  #scroll-item-2 .txt-lg
    font-size: 28px

  #scroll-item-3 .txt-xxl
    font-size: 48px

  #col-members
    width: 100%
    flex-basis: 100%
    padding: 12px
    box-sizing: border-box

  .row,
  .container
    padding: 0 12px

  .social-share .icon
    background-color: mix($blue-lowy,$blue-light)

  .fl-tn
    width: 120px !important
    height: auto
    position: absolute
    bottom: 4vw
    right: 2vh

  .mw
    max-width: 100%

@keyframes prompt
  to
    color: $color-dk

@keyframes sine
  to
    background-position: -20px 0

@media print
  html, body
    display: block
    overflow: visible
    height: auto

  #footer,
  .social-share
    display: none !important

  #scroller
    height: auto
    overflow: visible

  .txt-hl, .txt-dk, .txt-lt, .txt-ff
    color: $color-dk

  .bg-hl, .bg-dk, .bg-lt, .bg-ff
    background: $color-ff
    border-top: 1px solid $color-lt
    border-bottom: 1px solid $color-lt
    margin: -1px 0 0

  .scroll-item
    height: 13cm
    page-break-inside: avoid

  .row
    padding: 0

    > div + div
      border-left: 1px solid $color-lt

  #header
    opacity: 1 !important

  #map-surrounds path
    stroke: $color-lt

  #map-surrounds path,
  #map-australia path
    opacity: 1

  #scroll-item-12 .col-1-2.bg-lt
    border-left: none

@media print
  size: A4 portrait