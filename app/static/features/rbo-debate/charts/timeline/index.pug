extend /partials/layout

block append config
  - var datapath = "static/features/rbo-debate/charts/timeline/"
  - _.extend(page, data.getOne(datapath))
  - toPercent = (n) => (n * 100).toFixed(2) + "%"
  - chart = page
  
  - var cfawcDates = [1991, 2006, 2014, 2018]
  
block page
  .wrapper.flex
    .flex.flex-grow.flex-col
      .chart-title.txt-semi.txt-center= chart.title
      .chart-subtitle.cfawc.txt-tu.txt-cond.txt-center!= chart.subtitle
      .flex
        each t in ['Events', 'Impact']
          .col-title.txt-tu.flex-1= t
      .scroll
        .fade
        .timeline-wrap
          each event in chart.events
            .flex.flex-col.pv-sm
              strong.year(
                class=(event.year==0000 ? "hide" : "pv-sm")
                class=(cfawcDates.includes(event.year) ? "cfawc" : "")
              )!= event.year
              if event.year != 2006 && event.year != 2018
                .event-wrap.flex
                  .event.txt-semi!= event.event
                  .impact.txt-semi.italic!= event.impact
          
  
block append css
  style
    :sass
    
      $red: #b90000
    
      ::-webkit-scrollbar
        width: 5px
      ::-webkit-scrollbar-track
        background: #f3f3f3
        border-radius: 5px
      ::-webkit-scrollbar-thumb
        background: lighten($red, 0)
        border-radius: 5px
      ::-webkit-scrollbar-thumb:hover
        background: $red
      
      li
        list-style-type: none
        
      ul
        margin-bottom: 0
        padding-left: 0
  
      .wrapper
        height: 500px
        max-width: 700px

      .chart-title
        margin: auto
        font-size: 28px
        color: black
        
      .chart-subtitle
        margin: 5px auto 10px
        font-weight: 600
        width: 100%
        font-size: 16px
        color: $red
        padding-bottom: 10px
        border-bottom: 1px solid #b90000
        
      .col-title
        color: $red
        font-size: 14px
        &:first-child
          margin-left: 31px
        &:last-child
          margin-left: -62px
      
      .scroll
        overflow-y: scroll
        position: relative
        padding-right: 16px
        
      .fade
        position: fixed
        background: linear-gradient(180deg, #fff 0%, #fff0 5%, #fff0 95%, #fff 100%)
        width: 700px
        height: 400px
        pointer-events: none

      .timeline-wrap
        border-left: 1px solid $red
        padding-left: 20px
        margin-left: 10px
        margin-top: 10px
        
        > .flex:last-child
          padding-bottom: 0
          .year
            padding-bottom: 0

      .year
        color: $red
        
      .year:before,
      .cfawc:before
        content: ''
        position: absolute
        width: 12px
        height: 12px
        margin-left: -26px
        margin-top: 6px
        background: $red
        border-radius: 50%
        box-shadow: 0 0 0 2px white
      
      .cfawc:before
        background: $red
        box-shadow: 0 0 0 2px $red
        border: 2px solid white
        margin-top: 4px
        margin-left: -28.5px
        
      .cfawc.chart-subtitle:before
        margin-left: -22px
        height: 10px
        width: 10px
        margin-top: 4px
        
      .event
        color: black
        
      .impact
        margin-left: 1.5em
          
        
      .flex > .event
        flex: 0.8
      .flex > .impact
        flex: 1
        
      .hide
        opacity: 0
        height: 0
        
      .flex-1
        flex: 1
        
      .rel
        position: relative
    
      @media (max-width: 767px)
        body
          font-size: 17px
        
      @media (max-width: 500px)
        .event-wrap
          flex-direction: column
        .impact
          align-self: baseline
          margin-left: 0
          margin-top: 8px
          font-style: italic
          &:before
            content: 'Impact: '
