extend /partials/layout

block append config
  - page.includeFonts = false
  - page.url = "https://interactives.lowyinstitute.org/features/rules-based-order/"
  - page.class = ""
  - page.title = "Rules Based Order"
  - page.metaTitle = `${page.title} - Lowy Institute`
  - page.description = ""
  - page.image = ""
  - var timeline = data.getOne("static/features/rules-based-order/data").cards

block page
  include partials/intro
  include partials/pm-menu
  
  each era in timeline
    .card.wrap(class=era.pm)
      for card in era.events 
        if card.type == "anchor"
          if card.year == 2015
            .anchor(id=`anchor-${card.year}`)= ""
          else
            .anchor(id=`anchor-${card.year}`)= card.year
        else 
          - let isWide = card.type == "highlight" ? "wide highlight" : ""
          - let skipDate = card.date == "SKIP" ? "skip-date" : ""
          .card.row(class=`${card.type} ${skipDate}`)
            .card.item
              if card.type == "quote"
                include partials/quote
              else if card.type == "historyTimeline" 
                include partials/history
              else if card.type == "highlight"
                include partials/absence
              else if card.type == "excerpt" 
                .date.txt-sm!= card.date
              else
                .cardtype.txt-sm= card.type
              
              if card.type == "opinion"
                .expert
                  img.expert.image(src=card.expert.image)
                  .txt-xl!= card.expert.name
                    .txt-ml!= card.expert.credentials
              else
                .heading.txt-xl!= card.title
                .subheading.txt-ml!= card.subtitle 
                
              .content
                include partials/content
            if card.type == "opinion"
              .whitespace
            if card.media != undefined
              include partials/media


  include partials/header
  
  
block append css
  style
    include style/_w3-animate.css
    include:sass style/_vars.sass
    include:sass style/_helpers.sass
    include:sass style/_nav.sass
    include:sass style/_history.sass
    include:sass _styles.sass

block append scripts
  script(type="text/javascript" src="script/nav.js")
  script(type="text/javascript" src="script/interact.js")
    
    
    
    
